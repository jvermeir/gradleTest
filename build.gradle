apply plugin: 'java'

sourceCompatibility = 1.8
version = '1.0'
jar {
    manifest {
        attributes 'Implementation-Title': 'Gradle Quickstart',
                'Implementation-Version': version
    }
}

repositories {
    mavenCentral()
}

dependencies {
    compile group: 'commons-collections', name: 'commons-collections', version: '3.2.2'
    testCompile group: 'junit', name: 'junit', version: '4.+'
}

test {
    systemProperties 'property': 'value'
}

uploadArchives {
    repositories {
        flatDir {
            dirs 'repos'
        }
    }
}

task cmdLine(type: Exec) {
    doFirst {
        new File("bin").mkdirs()
        workingDir 'bin'
        commandLine 'sh', '-c', 'curl http://repo1.maven.org/maven2/com/github/tomakehurst/wiremock-standalone/2.6.0/wiremock-standalone-2.6.0.jar -O'
    }
}

task listFile() {
    doFirst {
        new File("bin").eachFile() { file ->
            println file.getName()
        }
    }
}

task all() {
    dependsOn tasks.cmdLine
    dependsOn tasks.listFile
}
